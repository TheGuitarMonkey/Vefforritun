{"version":3,"sources":["../vscripts.js"],"names":["videoplayer","div","video","controls","playImg","pauseImg","muteImg","unmuteImg","back","playpause","mute","fullscreen","next","data","videoID","imgElement","src","el","document","createElement","setAttribute","videoElement","poster","element","type","klasi","empty","firstChild","removeChild","videoOverlay","bool","pp","querySelector","ol","style","display","findVideoByID","arr","id","i","length","getID","parseInt","window","location","search","substr","clickPlaypause","paused","play","appendChild","pause","clickBack","currentTime","clickNext","clickMute","muted","clickFullscreen","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","makeControls","img","addEventListener","showLoading","p","createTextNode","showError","link","showData","vid","videos","titill","title","vidwrapper","load","r","XMLHttpRequest","open","onload","JSON","parse","response","status","onerror","send","init","videoDiv"],"mappings":"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","file":"vscripts.js","sourcesContent":["/**\r\n * Vídjóspilari\r\n */\r\nconst videoplayer = (function videoplayer() {\r\n  let div; // Aðal divvið\r\n  let video; // video elementið\r\n  let controls; // controls divvið\r\n\r\n  // Breytur fyrir myndir sem breytast, (play, pause, mute, unmute)\r\n  let playImg;\r\n  let pauseImg;\r\n  let muteImg;\r\n  let unmuteImg;\r\n\r\n  // Breytur fyrir takkana\r\n  let back;\r\n  let playpause;\r\n  let mute;\r\n  let fullscreen;\r\n  let next;\r\n\r\n  // Breyta fyrir videos.json\r\n  let data;\r\n  let videoID;\r\n\r\n  /**\r\n   * Býr til img element, tekur inn src.\r\n   */\r\n  function imgElement(src) {\r\n    const el = document.createElement('img');\r\n    el.setAttribute('src', src);\r\n    return el;\r\n  }\r\n\r\n  /**\r\n   * Býr til video element, tekur inn src, poster\r\n   */\r\n  function videoElement(src, poster) {\r\n    const el = document.createElement('video');\r\n    el.setAttribute('src', src);\r\n    el.setAttribute('poster', poster);\r\n    el.setAttribute('class', 'video__vid');\r\n    return el;\r\n  }\r\n\r\n  /**\r\n   * Býr til element með klasa. Tekur inn týpu og klasa.\r\n   */\r\n  function element(type, klasi) {\r\n    const el = document.createElement(type);\r\n    el.setAttribute('class', klasi);\r\n    return el;\r\n  }\r\n\r\n  /**\r\n   * Eyðir börnum elements.\r\n   */\r\n  function empty(el) {\r\n    while (el.firstChild) {\r\n      el.removeChild(el.firstChild);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Bætir div með class overlay á video__wrapper\r\n   */\r\n  function videoOverlay(bool) {\r\n    const pp = document.querySelector('.video__wrapper--playpause');\r\n    const ol = document.querySelector('.video__wrapper--overlay');\r\n    if (bool) {\r\n      pp.style.display = '';\r\n      ol.style.display = '';\r\n    } else {\r\n      pp.style.display = 'none';\r\n      ol.style.display = 'none';\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Fær inn fylki og id, skilar því vídjói sem hefur það id. Ef ekkert finnst,\r\n   * þá null.\r\n   */\r\n  function findVideoByID(arr, id) {\r\n    for (let i = 0; i < arr.length; i += 1) {\r\n      if (arr[i].id === id) {\r\n        return arr[i];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Nær í id úr url. Fallið gerir ráð fyrir að strengurinn url sé á forminu\r\n   * www.example.com/?id=4 og að ekki séu fleiri breytur en id í url\r\n   */\r\n  function getID() {\r\n    return parseInt(window.location.search.substr(4), 10);\r\n  }\r\n\r\n  // Föll þegar ýtt er á takka.\r\n  function clickPlaypause() {\r\n    if (video.paused) {\r\n      video.play();\r\n      videoOverlay(false);\r\n      playpause.removeChild(playpause.firstChild);\r\n      playpause.appendChild(pauseImg);\r\n    } else {\r\n      video.pause();\r\n      videoOverlay(true);\r\n      playpause.removeChild(playpause.firstChild);\r\n      playpause.appendChild(playImg);\r\n    }\r\n  }\r\n\r\n  function clickBack() {\r\n    video.currentTime -= 3;\r\n  }\r\n\r\n  function clickNext() {\r\n    video.currentTime += 3;\r\n  }\r\n\r\n  function clickMute() {\r\n    if (!video.muted) {\r\n      video.muted = true;\r\n      mute.removeChild(mute.firstChild);\r\n      mute.appendChild(unmuteImg);\r\n    } else {\r\n      video.muted = false;\r\n      mute.removeChild(mute.firstChild);\r\n      mute.appendChild(muteImg);\r\n    }\r\n  }\r\n\r\n  function clickFullscreen() {\r\n    if (video.requestFullscreen) {\r\n      video.requestFullscreen();\r\n    } else if (video.webkitRequestFullscreen) {\r\n      video.webkitRequestFullscreen();\r\n    } else if (video.mozRequestFullScreen) {\r\n      video.mozRequestFullScreen();\r\n    } else if (video.msRequestFullscreen) {\r\n      video.msRequestFullscreen();\r\n    }\r\n  }\r\n  // ---------- Hér lýkur takkaföllum ------------\r\n\r\n  /**\r\n   * Skilar div með video controls\r\n   */\r\n  function makeControls() {\r\n    const el = element('div', 'video__controls');\r\n    let img;\r\n\r\n    // Takki 1\r\n    back = element('button', 'video__controls--button');\r\n    img = imgElement('img/back.svg');\r\n    back.appendChild(img);\r\n    el.appendChild(back);\r\n\r\n    // Takki 2\r\n    playpause = element('button', 'video__controls--button');\r\n    img = imgElement('img/play.svg');\r\n    playpause.appendChild(img);\r\n    el.appendChild(playpause);\r\n\r\n    // Takki 3\r\n    mute = element('button', 'video__controls--button');\r\n    img = imgElement('img/mute.svg');\r\n    mute.appendChild(img);\r\n    el.appendChild(mute);\r\n\r\n    // Takki 4\r\n    fullscreen = element('button', 'video__controls--button');\r\n    img = imgElement('img/fullscreen.svg');\r\n    fullscreen.appendChild(img);\r\n    el.appendChild(fullscreen);\r\n\r\n    // Takki 5\r\n    next = element('button', 'video__controls--button');\r\n    img = imgElement('img/next.svg');\r\n    next.appendChild(img);\r\n    el.appendChild(next);\r\n\r\n    // Event listeners á takkana\r\n    back.addEventListener('click', clickBack);\r\n    playpause.addEventListener('click', clickPlaypause);\r\n    mute.addEventListener('click', clickMute);\r\n    fullscreen.addEventListener('click', clickFullscreen);\r\n    next.addEventListener('click', clickNext);\r\n\r\n    return el;\r\n  }\r\n\r\n  /**\r\n   * Skilaboð þegar verið er að sækja gögn\r\n   */\r\n  function showLoading() {\r\n    empty(div);\r\n    const p = element('p', 'video__loading');\r\n\r\n    p.appendChild(document.createTextNode('Loading...'));\r\n    div.appendChild(p);\r\n  }\r\n\r\n  /**\r\n   * Skilaboð þegar eitthvað fer úrskeiðis\r\n   */\r\n  function showError() {\r\n    empty(div);\r\n    const p = element('p', 'video__error');\r\n    p.appendChild(document.createTextNode('Vídjóið fannst ekki... mikið er það leitt.'));\r\n    div.appendChild(p);\r\n    const link = element('a', 'video__link');\r\n    link.setAttribute('href', 'index.html');\r\n    link.appendChild(document.createTextNode('Til baka'));\r\n    div.appendChild(link);\r\n  }\r\n\r\n  /**\r\n   * Sýnir gögn sem finnast\r\n   */\r\n  function showData() {\r\n    empty(div);\r\n\r\n    const vid = findVideoByID(data.videos, videoID);\r\n\r\n    // Ef vídjó finnst, sýndu það\r\n    if (vid) {\r\n      const titill = element('h1', 'video__title');\r\n      titill.appendChild(document.createTextNode(vid.title));\r\n      const vidwrapper = element('div', 'video__wrapper');\r\n      video = videoElement(vid.video, vid.poster);\r\n      vidwrapper.addEventListener('click', clickPlaypause);\r\n      vidwrapper.appendChild(video);\r\n      vidwrapper.appendChild(element('div', 'video__wrapper--playpause'));\r\n      vidwrapper.appendChild(element('div', 'video__wrapper--overlay'));\r\n      controls = makeControls();\r\n\r\n      const link = element('a', 'video__link');\r\n      link.setAttribute('href', 'index.html');\r\n      link.appendChild(document.createTextNode('Til baka'));\r\n\r\n      // Bæta vídjói og controls í video div\r\n      div.appendChild(titill);\r\n      div.appendChild(vidwrapper);\r\n      div.appendChild(controls);\r\n      div.appendChild(link);\r\n    } else {\r\n      showError();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Finnur út hvaða vídjó skal ná í og nær í það með XMLHttpRequest();\r\n   */\r\n  function load() {\r\n    const r = new XMLHttpRequest();\r\n    showLoading();\r\n\r\n    r.open('GET', 'videos.json', true);\r\n    r.onload = function onload() {\r\n      data = JSON.parse(r.response);\r\n      if (r.status >= 200 && r.status < 400) {\r\n        showData();\r\n      } else {\r\n        showError();\r\n      }\r\n    };\r\n\r\n    // Fall sem keyrir ef villa kemur upp\r\n    r.onerror = function onerror() {\r\n      showError();\r\n    };\r\n    r.send();\r\n  }\r\n\r\n  function init(videoDiv) {\r\n    // látum div vera vídjóið\r\n    div = videoDiv;\r\n    videoID = getID();\r\n\r\n    // Myndir sem breytast: Play, pause, mute, unmute\r\n    playImg = imgElement('img/play.svg');\r\n    pauseImg = imgElement('img/pause.svg');\r\n    muteImg = imgElement('img/mute.svg');\r\n    unmuteImg = imgElement('img/unmute.svg');\r\n\r\n    load();\r\n  }\r\n\r\n  return {\r\n    init,\r\n  };\r\n}());\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const videoDiv = document.querySelector('.video');\r\n  videoplayer.init(videoDiv);\r\n});\r\n"]}